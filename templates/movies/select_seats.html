{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container mt-4">
    <h2 class="text-center">Select Seats for {{ movie.title }}</h2>
    <p class="text-center text-muted">{{ showtime.datetime|date:"l, F j, Y - g:i A" }}</p>

    <!-- ðŸŽ¬ SCREEN Representation -->
    <div class="screen-box text-center">
        <h5>SCREEN</h5>
    </div>

    <!-- âœ… Seat Quantity Selection -->
    <div class="text-center mt-3">
        <label for="seatQuantity"><strong>Select Number of Seats:</strong></label>
        <select id="seatQuantity" class="form-select w-auto d-inline">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
        </select>
    </div>

    <!-- âœ… Seat Counter -->
    <div id="seatCounter" class="text-center mt-2"><strong>Selected Seats: 0</strong></div>

    <!-- âœ… Seat Grid -->
    <div class="seat-layout">
        <div id="seatContainer" class="seat-grid text-center" data-movie-id="{{ movie.id }}" data-showtime-id="{{ showtime.id }}">
            <!-- Seats will be dynamically populated here -->
        </div>
    </div>

    <!-- ðŸŽŸ Pricing & Confirm Button -->
    <div class="text-center mt-3">
        <h4><strong>Total Price: Â£<span id="totalPrice">0.00</span></strong></h4>
        <button class="btn btn-primary" id="confirmSeatsBtn" disabled onclick="confirmSeats()">Confirm Selection</button>
    </div>

    <!-- âœ… Legend for Seat Categories -->
    <div class="text-center mt-3">
        <span class="seat-legend gold"></span> Gold (Â£15) &nbsp;
        <span class="seat-legend diamond"></span> Diamond (Â£20) &nbsp;
        <span class="seat-legend selected"></span> Selected &nbsp;
        <span class="seat-legend booked"></span> Booked
    </div>
</div>

<!-- âœ… Load CSS & JS -->
<link rel="stylesheet" href="{% static 'movies/css/select_seats.css' %}">
<script src="{% static 'movies/js/select_seats.js' %}"></script>

{% endblock %}
