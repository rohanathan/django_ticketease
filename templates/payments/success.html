{% block content %}
<div class="container mt-5 text-center">
    <h2 class="fw-bold">Payment Successful ðŸŽ‰</h2>
    <p>Your payment was processed successfully!</p>
    <p>You will be redirected to your booking confirmation page in <span id="countdown">5</span> seconds.</p>
    
    {% if movie_id and showtime_id %}
        <p>You will be redirected to your booking confirmation page in <span id="countdown">5</span> seconds.</p>
        <a href="{% url 'booking_success' movie_id=movie_id showtime_id=showtime_id %}" class="btn btn-primary mt-3">
            Go to Booking Confirmation
        </a>
    {% else %}
        <p>Booking details are missing. Please check your email for confirmation.</p>
    {% endif %}
</div>

<script>
    // Redirect after 5 seconds
    let timeLeft = 5;
    const redirectUrl = "{% url 'booking_success' movie_id=movie_id showtime_id=showtime_id %}";
    const countdownElement = document.getElementById("countdown");
    
    const timer = setInterval(() => {
        timeLeft--;
        countdownElement.textContent = timeLeft;
        if (timeLeft <= 0) {
            clearInterval(timer);
            window.location.href = redirectUrl;
        }
    }, 1000);
</script>
{% endblock %}
